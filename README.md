# mysql-skill
一些在mysql中的知识点
<h3>索引</h3>
1.索引是表的目录，在查找内容之前可以先在目录中查找索引位置，以此快速定位查询数据。对于索引，会保存在额外的文件中<br>
2.索引分类：<br>
普通索引、唯一索引(主键默认唯一索引)、组合索引、全文索引（仅可以适用于MyISAM引擎的数据表） <br>
<b>注：对于创建的多列索引,只要查询的条件中用到了最左边的列,索引一般就会被使用</b><br>
如:<br>
组合索引(a,b,c,d)<br>
查询条件为a,用到了索引a<br>
查询条件为b or c or d,没用到索引<br>
查询条件为a,b 用到索引a,b<br>
查询条件为a,c or a,d 用到索引a<br>
（索引不可跳）<br>
<hr>
从MySQL5.5版本之后，MySQL的默认内置存储引擎已经是InnoDB了，他的主要特点有：<br>

（1）灾难恢复性比较好；<br>
（2）支持事务。默认的事务隔离级别为可重复度，通过MVCC（并发版本控制）来实现的;<br>
（3）使用的锁粒度为行级锁，可以支持更高的并发；<br>
（4）支持外键；<br>
（5）配合一些热备工具可以支持在线热备份；<br>
（6）在InnoDB中存在着缓冲管理，通过缓冲池，将索引和数据全部缓存起来，加快查询的速度；<br>
（7）对于InnoDB类型的表，其数据的物理组织形式是聚簇表。所有的数据按照主键来组织。数据和索引放在一块，都位于B+数的叶子节点上；<br>
<hr>
<h3>mysql提高查询效率</h3>
1.参数为子查询用exists代替in
  -- 慢
SELECT *
FROM Class_A
WHERE id IN (SELECT id
FROM Class_B);

-- 快
SELECT *
FROM Class_A A
WHERE EXISTS
(SELECT *
FROM Class_B B
WHERE A.id = B.id);

2.避免排序
有时查询的时候不排序，可以提高查询速度
排序的子句：
group by 子句
order by 子句
聚合函数(sum、count、avg、max、min)
distinct
集合运算符(union、intersect、except)
窗口函数(rank、row_number等)

使用union all 代替union
使用exists 代替distinct
使用where代替having

3.在索引列上使用函数索引会失效
使用 is null会失效，使用or有时会失效，使用否定式会失效，索引列的顺序错误会失效

4.减少中间表

<hr>
<h3>数据库的ACID特性</h3>
<b>原子性</b>是指一个事务是不可分割的工作单位，事务要么都不发生，要么都发生<br>
<b>一致性</b>是指事务前后的数据要保持一致<br>
<b>隔离性</b>是指多个用户并发访问数据库时，一个用户的事务不能被其他用户的事务所干扰，多个并发事务的数据之前相互隔离<br>
<b>持久性</b>是指一个事务一旦提交，对数据库的数据的改变就是永久的，就算数据库发生故障也不应该有所影响<br>

<hr>
<h3>数据库的三个范式</h3>
第一范式(1NF)是强调数据库的原子性的，也就是一个列不能再分成几个列<br>
第二范式（2NF）满足1NF，其次包含两部分，一，表必须有一个主键，二，没有包含主键的列必须完全依赖于主键，不能只依赖主键的一部分<br>
第三范式（3NF）是2NF的一个子集，其次，非主键列必须直接依赖于主键，不能传递依赖，即不能存在：非主键列 A 依赖于非主键列 B，非主键列 B 依赖于主键的情况。<br>

<hr>
<h3>数据库的事务隔离</h3>
MySQL 的事务隔离是在 MySQL. ini 配置文件里添加的，在文件的最后添加：transaction-isolation = REPEATABLE-READ<br>
<br>

未提交读（READ-UNCOMMITTED）：一个事务能读取另一个事务还未提交的数据（会出现幻读、脏读、不可重复读）。<br>
提交读（READ-COMMITTED）：一个事务提交后才能被其他事务读取到（会造成幻读、不可重复读）。<br>
可重复读（REPEATABLE-READ）：可重复读，默认级别，保证多次读取同一个数据时，其值都和事务开始时候的内容是一致，禁止读取到别的事务未提交的数据（会造成幻读）。<br>
序列化（SERIALIZABLE）：序列化，代价最高最可靠的隔离级别，该隔离级别能防止脏读、不可重复读、幻读。<br>

脏读 ：表示一个事务能够读取另一个事务中还未提交的数据。比如，某个事务尝试插入记录 A，此时该事务还未提交，然后另一个事务尝试读取到了记录 A。<br>
<br>
不可重复读 ：是指在一个事务内，多次读同一数据，若数据发生变化，查询的数据会不匹配。<br>
<br>
幻读 ：指同一个事务内多次查询返回的结果集不一样。比如同一个事务 A 第一次查询时候有 n 条记录，但是第二次同等条件下查询却有 n+1 条记录，这就好像产生了幻觉。发生幻读的原因也是另外一个事务新增或者删除或者修改了第一个事务结果集里面的数据，同一个记录的数据内容被修改了，所有数据行的记录就变多或者变少了。<br>
不可重复读针对的是update或delete，幻读针对的insert







  
